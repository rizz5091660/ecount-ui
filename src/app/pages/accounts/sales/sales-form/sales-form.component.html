<nb-card>
  <nb-card-header>
    New Invoice
  </nb-card-header>
  <nb-card-body>
    <form #salesForm="ngForm">
      <div class="form-group row">
        <div class="col-sm-3">
          <label for="custId" class="col-form-label">To</label><br />
          <ngx-select-dropdown [config]="config" [options]="model.custSupps" 
          [(value)]="custDD" [multiple]="false" (change)="selectionChanged($event,'cust',0)" ></ngx-select-dropdown>
        </div>
        <div class="col-sm-3">
            <label for="trxnDate" class="col-form-label">Date</label><br />
          <div class="form-group">
            <div class="input-group">
              <input class="form-control" placeholder="yyyy-mm-dd" name="trxnDtNgb" [(ngModel)]="trxnDtNgb" ngbDatepicker #d1="ngbDatepicker">
              <div class="input-group-append">
                <button class="btn btn-outline-primary" (click)="d1.toggle()" type="button"></button>
              </div>
            </div>
          </div>
        </div>        
        <div class="col-sm-3">
            <label for="dueDate" class="col-form-label">Due Date</label><br/>
            <div class="form-group">
              <div class="input-group">
                <input class="form-control" placeholder="yyyy-mm-dd" name="dueDtNgb" [(ngModel)]="dueDtNgb" ngbDatepicker #d2="ngbDatepicker">
                <div class="input-group-append">
                  <button class="btn btn-outline-primary" (click)="d2.toggle()" type="button"></button>
                </div>
              </div>
            </div>
        </div>
        <div class="col-sm-2">
          <label for="soCode" class="col-form-label">Invoice #</label><br />
          <input class="form-control" id="soCode" [(ngModel)]="model.soCode" name="soCode">
        </div>
      </div>
      <div class="form-group row">
          <div class="col-sm-2">
            Invoice Detail
          </div>
      </div>
      <div class="form-group row" *ngFor="let sod of model.sods;let i = index;" >
        <div class="col-sm-2" style="padding-right:0px">
            <ngx-select-dropdown [config]="config" [options]="model.inventories" 
             [multiple]="false" (change)="selectionChanged($event,'inv',i)" ></ngx-select-dropdown>
          </div>
        <div class="col-sm-2" style="padding-right:0px">
            <input class="form-control" type="number" id="sodq{{i}}" placeholder="Qty" [(ngModel)]="sod.quantity" name="soDetails{{i}}.quantity"> 
        </div>
        <div class="col-sm-2" style="padding-right:0px">
            <input class="form-control" type="number"   id="sodp{{i}}" placeholder="Price" [(ngModel)]="sod.unitPrice" name="soDetails{{i}}.unitPrice" (blur)="onCalculateTrxn()"> 
        </div>
        <div class="col-sm-2" style="padding-right:0px">
            <input class="form-control" type="number" id="soda{{i}}" placeholder="Tax" [(ngModel)]="sod.taxAmount" name="soDetails{{i}}.taxAmount" (blur)="onCalculateTrxn()"> 
        </div>
        <div class="col-sm-3" style="padding-right:0px">
            <div class="input-group">
                <input class="form-control"  type="number" id="soda{{i}}" placeholder="Amount" [(ngModel)]="sod.txnAmount" name="soDetails{{i}}.txnAmount" readonly> 
                <span class="input-group-append">
                  <button class="btn btn-danger input-group-text" (click)="onRemoveSalesDetail(sod)">
                      <i class="ion-close-round"></i>
                  </button>
                </span>
              </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-6">
        </div>
        <div class="col-sm-2">
          <b>Sub Total</b><br/>
          <b>Tax</b><br/>
          <b>Total</b><br/>
        </div>
        <div class="col-sm-4" style="float:left">
            <b>: {{subTotal}}</b><br/>
            <b>: {{model.totalTaxAmount}}</b><br/>
            <b>: {{model.totalAmount}}</b><br/>
        </div>
      </div>  
      <div class="form-group row">
          <div style="padding: 15px"><button  class="btn btn-primary"  (click)="onAddSalesDetail()">New Details</button></div>
          <div style="padding: 15px">
              <div class="dropdown btn-group" ngbDropdown>
                <button type="button" class="btn btn-primary">Create</button>
                <button type="button" class="btn btn-primary" ngbDropdownToggle></button>
                <ul class="dropdown-menu" ngbDropdownMenu>
                  <li class="dropdown-item" (click)="onSave()">Save</li>
                  <li class="dropdown-item" (click)="onApprove()">Approve</li>
                  <li class="dropdown-item">Approve & Add New</li>
                 </ul> 
                </div> 
            </div>
      </div>
    </form>
    <br /><br /><br /><br />
  </nb-card-body>
</nb-card>