<nb-card>
  <nb-card-header>
    New Invoice
  </nb-card-header>
  <nb-card-body>
    <form #salesForm="ngForm">
      <div class="form-group row">
        <div class="col-sm-3">
          <label for="custId" class="col-form-label">To</label><br />
          <input class="form-control" id="custId" placeholder="Name" [(ngModel)]="model.custId" name="custId">
        </div>
        <div class="col-sm-3">
            <label for="trxnDate" class="col-form-label">Date</label><br />
          <div class="form-group">
            <div class="input-group">
              <input class="form-control" placeholder="yyyy-mm-dd" name="trxnDtNgb" [(ngModel)]="trxnDtNgb" ngbDatepicker #d1="ngbDatepicker">
              <div class="input-group-append">
                <button class="btn btn-outline-primary" (click)="d1.toggle()" type="button"></button>
              </div>
            </div>
          </div>
        </div>        
        <div class="col-sm-3">
            <label for="dueDate" class="col-form-label">Due Date</label><br/>
            <div class="form-group">
              <div class="input-group">
                <input class="form-control" placeholder="yyyy-mm-dd" name="dueDtNgb" [(ngModel)]="dueDtNgb" ngbDatepicker #d2="ngbDatepicker">
                <div class="input-group-append">
                  <button class="btn btn-outline-primary" (click)="d2.toggle()" type="button"></button>
                </div>
              </div>
            </div>
        </div>
        <div class="col-sm-2">
          <label for="soCode" class="col-form-label">Invoice #</label><br />
          <input class="form-control" id="soCode" placeholder="Invoice" [(ngModel)]="model.soCode" name="soCode">
        </div>
      </div>
      <div class="form-group row">
          <div class="col-sm-2">
            <button  class="btn btn-primary"  (click)="onAddSalesDetail()">New Details</button>
          </div>
          <div class="col-sm-3">
            <div class="dropdown btn-group" ngbDropdown>
              <button type="button" class="btn btn-primary">Approve</button>
              <button type="button" class="btn btn-primary" ngbDropdownToggle></button>
              <ul class="dropdown-menu" ngbDropdownMenu>
                <li class="dropdown-item">Approve</li>
                <li class="dropdown-item">Approve & Add New</li>
               </ul> 
              </div> 
          </div>
      </div>



      <div class="form-group row" *ngFor="let sod of model.salesOrderDetails;let i = index;" >
        <div class="col-sm-3">
            <input class="form-control" id="sodn{{i}}" placeholder="Name" [(ngModel)]="sod.name" name="soDetails{{i}}.name"> 
        </div>
        <div class="col-sm-2">
            <input class="form-control" id="sodq{{i}}" placeholder="Qty" [(ngModel)]="sod.quantity" name="soDetails{{i}}.quantity"> 
        </div>
        <div class="col-sm-2">
            <input class="form-control" id="sodp{{i}}" placeholder="Price" [(ngModel)]="sod.unitPrice" name="soDetails{{i}}.unitPrice"> 
        </div>
        <div class="col-sm-2">
            <input class="form-control" type="number" id="soda{{i}}" placeholder="Tax" [(ngModel)]="sod.taxAmount" name="soDetails{{i}}.trxnAmount"> 
        </div>
        <div class="col-sm-2">
          <input class="form-control"  type="number" id="soda{{i}}" placeholder="Amount" [(ngModel)]="sod.trxnAmount" name="soDetails{{i}}.trxnAmount" (blur)="onCalculateTrxn()"> 
      </div>
      </div>
      <div class="form-group row">
        <div class="col-sm-7"></div>
        <div class="col-sm-2">
          <p>Sub Total</p>
          <p>Tax</p>
          <h4>Total</h4>
        </div>
        <div class="col-sm-3" style="float:left">
            <p>: {{subTotal}}</p>
            <p>: {{model.totalTaxAmount}}</p>
            <h4>: {{model.totalAmount}}</h4>
        </div>
      </div> 
    </form>
    <hr />
   <!--
    <pre>Model: {{ model | json }}</pre>
    -->
    <br /><br /><br /><br /><br /><br /><br />
    <br /><br /><br /><br /><br /><br /><br />
  </nb-card-body>
</nb-card>